{% extends 'smsapp/base.html' %}

{% load static %}

{% block title %} <title>Dashboard</title> {% endblock %}

{% block content %}

<br>
<div class="row">
	
	<div class="col">
		<div class="col-md">
			<div class="card text-center text-dark mb-3" id="total orders">
				<div class="card-header">
					<h5 class="card-title">Registrants</h5>
				</div>
				<div class="card-body">
					<table class="table table-sm">
				<tr>
					<th>Total Registrants</th>
					<th>Active</th>
					<th>Inactive</th>
				</tr>
				<tr>
					<td>{{ recodsnum }}</td>
					<td>{{ activenum }}</td>
					<td>{{ inactivenum }}</td>
				</tr>
				<a class="btn btn-primary  btn-sm btn-block" href="{% url 'createrecord' %}">Create New Record</a>
					</table>
				</div>
			</div>
		</div>
	</div>



	<div class="col">
		<div class="col-md">
			<div class="card text-center text-dark mb-3" id="orders delivered">
				<div class="card-header">
					<h5 class="card-title">Notification Deliveries</h5>
				</div>
				<div class="card-body">
					<table class="table table-sm">
				<tr>
					
					<th>Birthday Messages</th>
					
					<th>Anniversary Messages</th>
					<th>Welcome Messages</th>
					
					<th>Broadcast Messages</th>
				</tr>
				
				<tr>
					
					<td>{{ bdaysms }}</td>
					
					<td>{{ annisms }}</td>
					<td>{{ welsms }}</td>					
					<td>{{ bsms }}</td>
				</tr>
				<a class="btn btn-primary btn-sm btn-block" href="{% url 'createbmessage' %}">Create Broadcast Message</a>
					</table>
				</div>
			</div>
		</div>
	</div>

</div>

<div class="row">
	<div class="col-md-7">
		<h5>New Registrations (Last 5):</h5>
		<hr>
		<div class="card card-body">
			
			<table class="table table-sm">
				<tr>
					<th>First Name</th>
					<th>Last Name</th>
					<th>District</th>
					<th>Bmc</th>
					<th>Grade</th>
					<th>Date Added</th>
					
					
				</tr>
				{% for record in recods %}
				<tr>
					<td>{{ record.FirstName }}</a></td>
					<td>{{ record.LastName }}</td>
					<td>{{ record.bmc.subdistrict.district }}</td>
					<td>{{ record.bmc }}</td>
					<td>{{ record.grade }}</td>
					<td>{{ record.date_created }}</td>
					
					
				</tr>
				{% endfor %}
			</table>
		</div>
	</div>

	<div class="col-md-5">
		<h5>Sent Notifications (Last 5):</h5>
		<hr>
		<div class="card card-body">
			<table class="table table-sm">
				<tr>
					<th>Delivery Status</th>
					<th>Number of Recipients</th>
					<th>Total Sent</th>
					<th>Total Rejected</th>
					<th>Credit Used</th>
					<th>Credit Left</th>
				</tr>
				
				{% for delivery in deliveries %}
				<tr>	
					<td>{{ delivery.sms_status}}</td>
					<td>{{ delivery.recipient }}</td>
					<td>{{ delivery.total_sent }}</td>
					<td>{{ delivery.total_rejected }}</td>
					<td>{{ delivery.credit_used }}</td>
					<td>{{ delivery.credit_left }}</td>
					
				</tr>
				{% endfor %}
			</table>
		</div>
	</div>
</div>
</div

{% endblock %}

